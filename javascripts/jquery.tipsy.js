(function(b){function d(e,f){return(typeof e=="function")?(e.call(f)):e}function c(e){while(e=e.parentNode){if(e==document){return true}}return false}function a(f,e){this.$element=b(f);this.options=e;this.enabled=true;this.fixTitle()}a.prototype={show:function(){var h=this.getTitle();if(h&&this.enabled){var i=this.tip();i.find(".tipsy-inner")[this.options.html?"html":"text"](h);i[0].className="tipsy";i.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var k=b.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight});var f=i[0].offsetWidth,g=i[0].offsetHeight,e=d(this.options.gravity,this.$element[0]);var j;switch(e.charAt(0)){case"n":j={top:k.top+k.height+this.options.offset,left:k.left+k.width/2-f/2};break;case"s":j={top:k.top-g-this.options.offset,left:k.left+k.width/2-f/2};break;case"e":j={top:k.top+k.height/2-g/2,left:k.left-f-this.options.offset};break;case"w":j={top:k.top+k.height/2-g/2,left:k.left+k.width+this.options.offset};break}if(e.length==2){if(e.charAt(1)=="w"){j.left=k.left+k.width/2-15}else{j.left=k.left+k.width/2-f+15}}i.css(j).addClass("tipsy-"+e);i.find(".tipsy-arrow")[0].className="tipsy-arrow tipsy-arrow-"+e.charAt(0);if(this.options.className){i.addClass(d(this.options.className,this.$element[0]))}if(this.options.fade){i.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:this.options.opacity})}else{i.css({visibility:"visible",opacity:this.options.opacity})}}},hide:function(){if(this.options.fade){this.tip().stop().fadeOut(function(){b(this).remove()})}else{this.tip().remove()}},fixTitle:function(){var e=this.$element;if(e.attr("title")||typeof(e.attr("original-title"))!="string"){e.attr("original-title",e.attr("title")||"").removeAttr("title")}},getTitle:function(){var e,f=this.$element,g=this.options;this.fixTitle();var e,g=this.options;if(typeof g.title=="string"){e=f.attr(g.title=="title"?"original-title":g.title)}else{if(typeof g.title=="function"){e=g.title.call(f[0])}}e=(""+e).replace(/(^\s*|\s*$)/,"");return e||g.fallback},tip:function(){if(!this.$tip){this.$tip=b('<div class="tipsy"></div>').html('<div class="tipsy-arrow"></div><div class="tipsy-inner"></div>');this.$tip.data("tipsy-pointee",this.$element[0])}return this.$tip},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled}};b.fn.tipsy=function(i){if(i===true){return this.data("tipsy")}else{if(typeof i=="string"){var j=this.data("tipsy");if(j){j[i]()}return this}}i=b.extend({},b.fn.tipsy.defaults,i);function h(n){var m=b.data(n,"tipsy");if(!m){m=new a(n,b.fn.tipsy.elementOptions(n,i));b.data(n,"tipsy",m)}return m}function g(){var m=h(this);m.hoverState="in";if(i.delayIn==0){m.show()}else{m.fixTitle();setTimeout(function(){if(m.hoverState=="in"){m.show()}},i.delayIn)}}function f(){var m=h(this);m.hoverState="out";if(i.delayOut==0){m.hide()}else{setTimeout(function(){if(m.hoverState=="out"){m.hide()}},i.delayOut)}}if(!i.live){this.each(function(){h(this)})}if(i.trigger!="manual"){var k=i.live?"live":"bind",l=i.trigger=="hover"?"mouseenter":"focus",e=i.trigger=="hover"?"mouseleave":"blur";this[k](l,g)[k](e,f)}return this};b.fn.tipsy.defaults={className:null,delayIn:0,delayOut:0,fade:false,fallback:"",gravity:"n",html:false,live:false,offset:0,opacity:0.8,title:"title",trigger:"hover"};b.fn.tipsy.revalidate=function(){b(".tipsy").each(function(){var e=b.data(this,"tipsy-pointee");if(!e||!c(e)){b(this).remove()}})};b.fn.tipsy.elementOptions=function(f,e){return b.metadata?b.extend({},e,b(f).metadata()):e};b.fn.tipsy.autoNS=function(){return b(this).offset().top>(b(document).scrollTop()+b(window).height()/2)?"s":"n"};b.fn.tipsy.autoWE=function(){return b(this).offset().left>(b(document).scrollLeft()+b(window).width()/2)?"e":"w"};b.fn.tipsy.autoBounds=function(e,f){return function(){var h={ns:f[0],ew:(f.length>1?f[1]:false)},j=b(document).scrollTop()+e,i=b(document).scrollLeft()+e,g=b(this);if(g.offset().top<j){h.ns="n"}if(g.offset().left<i){h.ew="w"}if(b(window).width()+b(document).scrollLeft()-g.offset().left<e){h.ew="e"}if(b(window).height()+b(document).scrollTop()-g.offset().top<e){h.ns="s"}return h.ns+(h.ew?h.ew:"")}}})(jQuery);