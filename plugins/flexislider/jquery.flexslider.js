(function(a){a.flexslider=function(n,d){var f=a(n),l=a.extend({},a.flexslider.defaults,d),g=l.namespace,k=("ontouchstart" in window)||window.DocumentTouch&&document instanceof DocumentTouch,b=(k)?"touchend":"click",i=l.direction==="vertical",j=l.reverse,e=(l.itemWidth>0),m=l.animation==="fade",h=l.asNavFor!=="",c={};a.data(n,"flexslider",f);c={init:function(){f.animating=false;f.currentSlide=l.startAt;f.animatingTo=f.currentSlide;f.atEnd=(f.currentSlide===0||f.currentSlide===f.last);f.containerSelector=l.selector.substr(0,l.selector.search(" "));f.slides=a(l.selector,f);f.container=a(f.containerSelector,f);f.count=f.slides.length;f.syncExists=a(l.sync).length>0;if(l.animation==="slide"){l.animation="swing"}f.prop=(i)?"top":"marginLeft";f.args={};f.manualPause=false;f.transitions=!l.video&&!m&&l.useCSS&&(function(){var p=document.createElement("div"),q=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var o in q){if(p.style[q[o]]!==undefined){f.pfx=q[o].replace("Perspective","").toLowerCase();f.prop="-"+f.pfx+"-transform";return true}}return false}());if(l.controlsContainer!==""){f.controlsContainer=a(l.controlsContainer).length>0&&a(l.controlsContainer)}if(l.manualControls!==""){f.manualControls=a(l.manualControls).length>0&&a(l.manualControls)}if(l.randomize){f.slides.sort(function(){return(Math.round(Math.random())-0.5)});f.container.empty().append(f.slides)}f.doMath();if(h){c.asNav.setup()}f.setup("init");if(l.controlNav){c.controlNav.setup()}if(l.directionNav){c.directionNav.setup()}if(l.keyboard&&(a(f.containerSelector).length===1||l.multipleKeyboard)){a(document).bind("keyup",function(q){var o=q.keyCode;if(!f.animating&&(o===39||o===37)){var p=(o===39)?f.getTarget("next"):(o===37)?f.getTarget("prev"):false;f.flexAnimate(p,l.pauseOnAction)}})}if(l.mousewheel){f.bind("mousewheel",function(q,s,p,r){q.preventDefault();var o=(s<0)?f.getTarget("next"):f.getTarget("prev");f.flexAnimate(o,l.pauseOnAction)})}if(l.pausePlay){c.pausePlay.setup()}if(l.slideshow){if(l.pauseOnHover){f.hover(function(){if(!f.manualPlay&&!f.manualPause){f.pause()}},function(){if(!f.manualPause&&!f.manualPlay){f.play()}})}(l.initDelay>0)?setTimeout(f.play,l.initDelay):f.play()}if(k&&l.touch){c.touch()}if(!m||(m&&l.smoothHeight)){a(window).bind("resize focus",c.resize)}setTimeout(function(){l.start(f)},200)},asNav:{setup:function(){f.asNav=true;f.animatingTo=Math.floor(f.currentSlide/f.move);f.currentItem=f.currentSlide;f.slides.removeClass(g+"active-slide").eq(f.currentItem).addClass(g+"active-slide");f.slides.click(function(o){o.preventDefault();var q=a(this),p=q.index();if(!a(l.asNavFor).data("flexslider").animating&&!q.hasClass("active")){f.direction=(f.currentItem<p)?"next":"prev";f.flexAnimate(p,l.pauseOnAction,false,true,true)}})}},controlNav:{setup:function(){if(!f.manualControls){c.controlNav.setupPaging()}else{c.controlNav.setupManual()}},setupPaging:function(){var r=(l.controlNav==="thumbnails")?"control-thumbs":"control-paging",o=1,q;f.controlNavScaffold=a('<ol class="'+g+"control-nav "+g+r+'"></ol>');if(f.pagingCount>1){for(var p=0;p<f.pagingCount;p++){q=(l.controlNav==="thumbnails")?'<img src="'+f.slides.eq(p).attr("data-thumb")+'"/>':"<a>"+o+"</a>";f.controlNavScaffold.append("<li>"+q+"</li>");o++}}(f.controlsContainer)?a(f.controlsContainer).append(f.controlNavScaffold):f.append(f.controlNavScaffold);c.controlNav.set();c.controlNav.active();f.controlNavScaffold.delegate("a, img",b,function(u){u.preventDefault();var s=a(this),t=f.controlNav.index(s);if(!s.hasClass(g+"active")){f.direction=(t>f.currentSlide)?"next":"prev";f.flexAnimate(t,l.pauseOnAction)}});if(k){f.controlNavScaffold.delegate("a","click touchstart",function(s){s.preventDefault()})}},setupManual:function(){f.controlNav=f.manualControls;c.controlNav.active();f.controlNav.live(b,function(q){q.preventDefault();var o=a(this),p=f.controlNav.index(o);if(!o.hasClass(g+"active")){(p>f.currentSlide)?f.direction="next":f.direction="prev";f.flexAnimate(p,l.pauseOnAction)}});if(k){f.controlNav.live("click touchstart",function(o){o.preventDefault()})}},set:function(){var o=(l.controlNav==="thumbnails")?"img":"a";f.controlNav=a("."+g+"control-nav li "+o,(f.controlsContainer)?f.controlsContainer:f)},active:function(){f.controlNav.removeClass(g+"active").eq(f.animatingTo).addClass(g+"active")},update:function(o,p){if(f.pagingCount>1&&o==="add"){f.controlNavScaffold.append(a("<li><a>"+f.count+"</a></li>"))}else{if(f.pagingCount===1){f.controlNavScaffold.find("li").remove()}else{f.controlNav.eq(p).closest("li").remove()}}c.controlNav.set();(f.pagingCount>1&&f.pagingCount!==f.controlNav.length)?f.update(p,o):c.controlNav.active()}},directionNav:{setup:function(){var o=a('<ul class="'+g+'direction-nav"><li><a class="'+g+'prev" href="#">'+l.prevText+'</a></li><li><a class="'+g+'next" href="#">'+l.nextText+"</a></li></ul>");if(f.controlsContainer){a(f.controlsContainer).append(o);f.directionNav=a("."+g+"direction-nav li a",f.controlsContainer)}else{f.append(o);f.directionNav=a("."+g+"direction-nav li a",f)}c.directionNav.update();f.directionNav.bind(b,function(q){q.preventDefault();var p=(a(this).hasClass(g+"next"))?f.getTarget("next"):f.getTarget("prev");f.flexAnimate(p,l.pauseOnAction)});if(k){f.directionNav.bind("click touchstart",function(p){p.preventDefault()})}},update:function(){var o=g+"disabled";if(f.pagingCount===1){f.directionNav.addClass(o)}else{if(!l.animationLoop){if(f.animatingTo===0){f.directionNav.removeClass(o).filter("."+g+"prev").addClass(o)}else{if(f.animatingTo===f.last){f.directionNav.removeClass(o).filter("."+g+"next").addClass(o)}else{f.directionNav.removeClass(o)}}}else{f.directionNav.removeClass(o)}}}},pausePlay:{setup:function(){var o=a('<div class="'+g+'pauseplay"><a></a></div>');if(f.controlsContainer){f.controlsContainer.append(o);f.pausePlay=a("."+g+"pauseplay a",f.controlsContainer)}else{f.append(o);f.pausePlay=a("."+g+"pauseplay a",f)}c.pausePlay.update((l.slideshow)?g+"pause":g+"play");f.pausePlay.bind(b,function(p){p.preventDefault();if(a(this).hasClass(g+"pause")){f.manualPause=true;f.manualPlay=false;f.pause()}else{f.manualPause=false;f.manualPlay=true;f.play()}});if(k){f.pausePlay.bind("click touchstart",function(p){p.preventDefault()})}},update:function(o){(o==="play")?f.pausePlay.removeClass(g+"pause").addClass(g+"play").text(l.playText):f.pausePlay.removeClass(g+"play").addClass(g+"pause").text(l.pauseText)}},touch:function(){var q,x,p,t,v,u,s=false;n.addEventListener("touchstart",o,false);function o(y){if(f.animating){y.preventDefault()}else{if(y.touches.length===1){f.pause();t=(i)?f.h:f.w;u=Number(new Date());p=(e&&j&&f.animatingTo===f.last)?0:(e&&j)?f.limit-(((f.itemW+l.itemMargin)*f.move)*f.animatingTo):(e&&f.currentSlide===f.last)?f.limit:(e)?((f.itemW+l.itemMargin)*f.move)*f.currentSlide:(j)?(f.last-f.currentSlide+f.cloneOffset)*t:(f.currentSlide+f.cloneOffset)*t;q=(i)?y.touches[0].pageY:y.touches[0].pageX;x=(i)?y.touches[0].pageX:y.touches[0].pageY;n.addEventListener("touchmove",w,false);n.addEventListener("touchend",r,false)}}}function w(y){v=(i)?q-y.touches[0].pageY:q-y.touches[0].pageX;s=(i)?(Math.abs(v)<Math.abs(y.touches[0].pageX-x)):(Math.abs(v)<Math.abs(y.touches[0].pageY-x));if(!s||Number(new Date())-u>500){y.preventDefault();if(!m&&f.transitions){if(!l.animationLoop){v=v/((f.currentSlide===0&&v<0||f.currentSlide===f.last&&v>0)?(Math.abs(v)/t+2):1)}f.setProps(p+v,"setTouch")}}}function r(y){if(f.animatingTo===f.currentSlide&&!s&&!(v===null)){var z=(j)?-v:v,A=(z>0)?f.getTarget("next"):f.getTarget("prev");if(f.canAdvance(A)&&(Number(new Date())-u<550&&Math.abs(z)>50||Math.abs(z)>t/2)){f.flexAnimate(A,l.pauseOnAction)}else{f.flexAnimate(f.currentSlide,l.pauseOnAction,true)}}n.removeEventListener("touchmove",w,false);n.removeEventListener("touchend",r,false);q=null;x=null;v=null;p=null}},resize:function(){if(!f.animating&&f.is(":visible")){if(!e){f.doMath()}if(m){c.smoothHeight()}else{if(e){f.slides.width(f.computedW);f.update(f.pagingCount);f.setProps()}else{if(i){f.viewport.height(f.h);f.setProps(f.h,"setTotal")}else{if(l.smoothHeight){c.smoothHeight()}f.newSlides.width(f.computedW);f.setProps(f.computedW,"setTotal")}}}}},smoothHeight:function(o){if(!i||m){var p=(m)?f:f.viewport;(o)?p.animate({height:f.slides.eq(f.animatingTo).height()},o):p.height(f.slides.eq(f.animatingTo).height())}},sync:function(p){var q=a(l.sync).data("flexslider"),o=f.animatingTo;switch(p){case"animate":q.flexAnimate(o,l.pauseOnAction,false,true);break;case"play":if(!q.playing&&!q.asNav){q.play()}break;case"pause":q.pause();break}}};f.flexAnimate=function(x,u,v,q,r){if(h&&f.pagingCount===1){f.direction=(f.currentItem<x)?"next":"prev"}if(!f.animating&&(f.canAdvance(x,r)||v)&&f.is(":visible")){if(h&&q){var o=a(l.asNavFor).data("flexslider");f.atEnd=x===0||x===f.count-1;o.flexAnimate(x,true,false,true,r);f.direction=(f.currentItem<x)?"next":"prev";o.direction=f.direction;if(Math.ceil((x+1)/f.visible)-1!==f.currentSlide&&x!==0){f.currentItem=x;f.slides.removeClass(g+"active-slide").eq(x).addClass(g+"active-slide");x=Math.floor(x/f.visible)}else{f.currentItem=x;f.slides.removeClass(g+"active-slide").eq(x).addClass(g+"active-slide");return false}}f.animating=true;f.animatingTo=x;l.before(f);if(u){f.pause()}if(f.syncExists&&!r){c.sync("animate")}if(l.controlNav){c.controlNav.active()}if(!e){f.slides.removeClass(g+"active-slide").eq(x).addClass(g+"active-slide")}f.atEnd=x===0||x===f.last;if(l.directionNav){c.directionNav.update()}if(x===f.last){l.end(f);if(!l.animationLoop){f.pause()}}if(!m){var p=(i)?f.slides.filter(":first").height():f.computedW,t,w,s;if(e){t=(l.itemWidth>f.w)?l.itemMargin*2:l.itemMargin;s=((f.itemW+t)*f.move)*f.animatingTo;w=(s>f.limit&&f.visible!==1)?f.limit:s}else{if(f.currentSlide===0&&x===f.count-1&&l.animationLoop&&f.direction!=="next"){w=(j)?(f.count+f.cloneOffset)*p:0}else{if(f.currentSlide===f.last&&x===0&&l.animationLoop&&f.direction!=="prev"){w=(j)?0:(f.count+1)*p}else{w=(j)?((f.count-1)-x+f.cloneOffset)*p:(x+f.cloneOffset)*p}}}f.setProps(w,"",l.animationSpeed);if(f.transitions){if(!l.animationLoop||!f.atEnd){f.animating=false;f.currentSlide=f.animatingTo}f.container.unbind("webkitTransitionEnd transitionend");f.container.bind("webkitTransitionEnd transitionend",function(){f.wrapup(p)})}else{f.container.animate(f.args,l.animationSpeed,l.easing,function(){f.wrapup(p)})}}else{f.slides.eq(f.currentSlide).fadeOut(l.animationSpeed,l.easing);f.slides.eq(x).fadeIn(l.animationSpeed,l.easing,f.wrapup)}if(l.smoothHeight){c.smoothHeight(l.animationSpeed)}}};f.wrapup=function(o){if(!m&&!e){if(f.currentSlide===0&&f.animatingTo===f.last&&l.animationLoop){f.setProps(o,"jumpEnd")}else{if(f.currentSlide===f.last&&f.animatingTo===0&&l.animationLoop){f.setProps(o,"jumpStart")}}}f.animating=false;f.currentSlide=f.animatingTo;l.after(f)};f.animateSlides=function(){if(!f.animating){f.flexAnimate(f.getTarget("next"))}};f.pause=function(){clearInterval(f.animatedSlides);f.playing=false;if(l.pausePlay){c.pausePlay.update("play")}if(f.syncExists){c.sync("pause")}};f.play=function(){f.animatedSlides=setInterval(f.animateSlides,l.slideshowSpeed);f.playing=true;if(l.pausePlay){c.pausePlay.update("pause")}if(f.syncExists){c.sync("play")}};f.canAdvance=function(o,p){var q=(h)?f.pagingCount-1:f.last;return(p)?true:(h&&f.currentItem===f.count-1&&o===0&&f.direction==="prev")?true:(h&&f.currentItem===0&&o===f.pagingCount-1&&f.direction!=="next")?false:(o===f.currentSlide&&!h)?false:(l.animationLoop)?true:(f.atEnd&&f.currentSlide===0&&o===q&&f.direction!=="next")?false:(f.atEnd&&f.currentSlide===q&&o===0&&f.direction==="next")?false:true};f.getTarget=function(o){f.direction=o;if(o==="next"){return(f.currentSlide===f.last)?0:f.currentSlide+1}else{return(f.currentSlide===0)?f.last:f.currentSlide-1}};f.setProps=function(r,p,o){var q=(function(){var t=(r)?r:((f.itemW+l.itemMargin)*f.move)*f.animatingTo,s=(function(){if(e){return(p==="setTouch")?r:(j&&f.animatingTo===f.last)?0:(j)?f.limit-(((f.itemW+l.itemMargin)*f.move)*f.animatingTo):(f.animatingTo===f.last)?f.limit:t}else{switch(p){case"setTotal":return(j)?((f.count-1)-f.currentSlide+f.cloneOffset)*r:(f.currentSlide+f.cloneOffset)*r;case"setTouch":return(j)?r:r;case"jumpEnd":return(j)?r:f.count*r;case"jumpStart":return(j)?f.count*r:r;default:return r}}}());return(s*-1)+"px"}());if(f.transitions){q=(i)?"translate3d(0,"+q+",0)":"translate3d("+q+",0,0)";o=(o!==undefined)?(o/1000)+"s":"0s";f.container.css("-"+f.pfx+"-transition-duration",o)}f.args[f.prop]=q;if(f.transitions||o===undefined){f.container.css(f.args)}};f.setup=function(q){if(!m){var o,p;if(q==="init"){f.viewport=a('<div class="'+g+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(f).append(f.container);f.cloneCount=0;f.cloneOffset=0;if(j){p=a.makeArray(f.slides).reverse();f.slides=a(p);f.container.empty().append(f.slides)}}if(l.animationLoop&&!e){f.cloneCount=2;f.cloneOffset=1;if(q!=="init"){f.container.find(".clone").remove()}f.container.append(f.slides.first().clone().addClass("clone")).prepend(f.slides.last().clone().addClass("clone"))}f.newSlides=a(l.selector,f);o=(j)?f.count-1-f.currentSlide+f.cloneOffset:f.currentSlide+f.cloneOffset;if(i&&!e){f.container.height((f.count+f.cloneCount)*200+"%").css("position","absolute").width("100%");setTimeout(function(){f.newSlides.css({display:"block"});f.doMath();f.viewport.height(f.h);f.setProps(o*f.h,"init")},(q==="init")?100:0)}else{f.container.width((f.count+f.cloneCount)*200+"%");f.setProps(o*f.computedW,"init");setTimeout(function(){f.doMath();f.newSlides.css({width:f.computedW,"float":"left",display:"block"});if(l.smoothHeight){c.smoothHeight()}},(q==="init")?100:0)}}else{f.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"});if(q==="init"){f.slides.eq(f.currentSlide).fadeIn(l.animationSpeed,l.easing)}if(l.smoothHeight){c.smoothHeight()}}if(!e){f.slides.removeClass(g+"active-slide").eq(f.currentSlide).addClass(g+"active-slide")}};f.doMath=function(){var q=f.slides.first(),o=l.itemMargin,r=l.minItems,p=l.maxItems;f.w=f.width();f.h=q.height();f.boxPadding=q.outerWidth()-q.width();if(e){f.itemT=l.itemWidth+o;f.minW=(r)?r*f.itemT:f.w;f.maxW=(p)?p*f.itemT:f.w;f.itemW=(f.minW>f.w)?(f.w-(o*r))/r:(f.maxW<f.w)?(f.w-(o*p))/p:(l.itemWidth>f.w)?f.w:l.itemWidth;f.visible=Math.floor(f.w/(f.itemW+o));f.move=(l.move>0&&l.move<f.visible)?l.move:f.visible;f.pagingCount=Math.ceil(((f.count-f.visible)/f.move)+1);f.last=f.pagingCount-1;f.limit=(f.pagingCount===1)?0:(l.itemWidth>f.w)?((f.itemW+(o*2))*f.count)-f.w-o:((f.itemW+o)*f.count)-f.w-o}else{f.itemW=f.w;f.pagingCount=f.count;f.last=f.count-1}f.computedW=f.itemW-f.boxPadding};f.update=function(p,o){f.doMath();if(!e){if(p<f.currentSlide){f.currentSlide+=1}else{if(p<=f.currentSlide&&p!==0){f.currentSlide-=1}}f.animatingTo=f.currentSlide}if(l.controlNav&&!f.manualControls){if((o==="add"&&!e)||f.pagingCount>f.controlNav.length){c.controlNav.update("add")}else{if((o==="remove"&&!e)||f.pagingCount<f.controlNav.length){if(e&&f.currentSlide>f.last){f.currentSlide-=1;f.animatingTo-=1}c.controlNav.update("remove",f.last)}}}if(l.directionNav){c.directionNav.update()}};f.addSlide=function(q,o){var p=a(q);f.count+=1;f.last=f.count-1;if(i&&j){(o!==undefined)?f.slides.eq(f.count-o).after(p):f.container.prepend(p)}else{(o!==undefined)?f.slides.eq(o).before(p):f.container.append(p)}f.update(o,"add");f.slides=a(l.selector+":not(.clone)",f);f.setup();l.added(f)};f.removeSlide=function(p){var o=(isNaN(p))?f.slides.index(a(p)):p;f.count-=1;f.last=f.count-1;if(isNaN(p)){a(p,f.slides).remove()}else{(i&&j)?f.slides.eq(f.last).remove():f.slides.eq(p).remove()}f.doMath();f.update(o,"remove");f.slides=a(l.selector+":not(.clone)",f);f.setup();l.removed(f)};c.init()};a.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:false,animationLoop:true,smoothHeight:false,startAt:0,slideshow:true,slideshowSpeed:7000,animationSpeed:600,initDelay:0,randomize:false,pauseOnAction:true,pauseOnHover:false,useCSS:true,touch:true,video:false,controlNav:true,directionNav:true,prevText:"Previous",nextText:"Next",keyboard:true,multipleKeyboard:false,mousewheel:false,pausePlay:false,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:0,maxItems:0,move:0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){}};a.fn.flexslider=function(b){if(b===undefined){b={}}if(typeof b==="object"){return this.each(function(){var d=a(this),e=(b.selector)?b.selector:".slides > li",f=d.find(e);if(f.length===1){f.fadeIn(400);if(b.start){b.start(d)}}else{if(d.data("flexslider")===undefined){new a.flexslider(this,b)}}})}else{var c=a(this).data("flexslider");switch(b){case"play":c.play();break;case"pause":c.pause();break;case"next":c.flexAnimate(c.getTarget("next"),true);break;case"prev":case"previous":c.flexAnimate(c.getTarget("prev"),true);break;default:if(typeof b==="number"){c.flexAnimate(b,true)}}}}})(jQuery);